<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Tempero & Sabor</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="admin-container">
        <header class="admin-header">
            <div class="header-content">
                <h1>üçî Gerenciamento - Tempero & Sabor</h1>
                <div class="header-actions">
                    <a href="../index.html" class="btn-view-site" target="_blank">Ver Site</a>
                    <button id="logout-btn" class="btn-logout">Sair</button>
                </div>
            </div>
        </header>

        <nav class="admin-nav">
            <button class="nav-btn active" data-section="products">
                <span>üì¶</span> Produtos
            </button>
            <button class="nav-btn" data-section="ingredients">
                <span>ü•¨</span> Ingredientes
            </button>
            <button class="nav-btn" data-section="config">
                <span>‚öôÔ∏è</span> Configura√ß√µes
            </button>
        </nav>

        <!-- Se√ß√£o de Produtos -->
        <section id="products-section" class="admin-section active">
            <div class="section-header">
                <h2>Gerenciar Produtos</h2>
                <button id="add-product-btn" class="btn-primary">
                    <span>+</span> Adicionar Produto
                </button>
            </div>

            <div class="loading" id="products-loading" style="display: none;">
                Carregando produtos...
            </div>

            <div class="products-grid" id="products-grid">
                <!-- Produtos ser√£o carregados aqui -->
            </div>
        </section>

        <!-- Se√ß√£o de Ingredientes -->
        <section id="ingredients-section" class="admin-section">
            <div class="section-header">
                <h2>Gerenciar Ingredientes</h2>
                <button id="add-ingredient-btn" class="btn-primary">
                    <span>+</span> Adicionar Ingrediente
                </button>
            </div>

            <div class="loading" id="ingredients-loading" style="display: none;">
                Carregando ingredientes...
            </div>

            <div class="ingredients-grid" id="ingredients-grid">
                <!-- Ingredientes ser√£o carregados aqui -->
            </div>
        </section>

        <!-- Se√ß√£o de Configura√ß√µes -->
        <section id="config-section" class="admin-section">
            <div class="section-header">
                <h2>Configura√ß√µes do Restaurante</h2>
            </div>
            <div class="config-form-container">
                <form id="config-form">
                    <div class="form-group">
                        <label for="config-name">Nome do Restaurante *</label>
                        <input type="text" id="config-name" required>
                    </div>

                    <div class="form-group">
                        <label for="config-whatsapp">N√∫mero WhatsApp *</label>
                        <input type="text" id="config-whatsapp" placeholder="67982077085" required>
                    </div>

                    <div class="form-group">
                        <label for="config-latitude">Latitude</label>
                        <input type="number" id="config-latitude" step="any">
                    </div>

                    <div class="form-group">
                        <label for="config-longitude">Longitude</label>
                        <input type="number" id="config-longitude" step="any">
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-save">Salvar Configura√ß√µes</button>
                    </div>
                </form>
            </div>
        </section>
    </div>

    <!-- Modal de Ingrediente -->
    <div id="ingredient-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="ingredient-modal-title">Adicionar Ingrediente</h3>
                <button class="modal-close" id="ingredient-modal-close">&times;</button>
            </div>
            
            <!-- Abas -->
            <div class="modal-tabs">
                <button class="modal-tab active" data-tab="single">Adicionar</button>
                <button class="modal-tab" data-tab="batch">+ Lista de ingredientes</button>
            </div>
            
            <!-- Aba: Adicionar √∫nico -->
            <div id="ingredient-tab-single" class="modal-tab-content active">
                <form id="ingredient-form">
                    <input type="hidden" id="ingredient-id">
                    
                    <div class="form-group">
                        <label for="ingredient-name">Nome do Ingrediente *</label>
                        <input type="text" id="ingredient-name" required>
                    </div>

                    <div class="form-group">
                        <label for="ingredient-price">Pre√ßo (R$) *</label>
                        <input type="number" id="ingredient-price" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="ingredient-active" checked>
                            <span>Ingrediente ativo</span>
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-cancel" id="cancel-ingredient-btn">Cancelar</button>
                        <button type="submit" class="btn-save">Salvar</button>
                    </div>
                </form>
            </div>
            
            <!-- Aba: Lista de ingredientes -->
            <div id="ingredient-tab-batch" class="modal-tab-content">
                <form id="ingredient-batch-form">
                    <div class="form-group">
                        <label>Op√ß√£o de Pre√ßo *</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="price-mode" value="none" checked>
                                <span>Sem pre√ßo (R$ 0,00)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="price-mode" value="individual">
                                <span>Pre√ßo individual</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="price-mode" value="unique">
                                <span>Pre√ßo √∫nico para todos</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group" id="price-unique-group" style="display: none;">
                        <label for="price-unique">Pre√ßo √önico (R$) *</label>
                        <input type="number" id="price-unique" step="0.01" min="0" placeholder="0.00">
                        <small>Este pre√ßo ser√° aplicado a todos os ingredientes da lista.</small>
                    </div>

                    <div class="form-group">
                        <label for="ingredient-list">Lista de Ingredientes *</label>
                        <textarea 
                            id="ingredient-list" 
                            rows="6" 
                            placeholder="Digite os ingredientes separados por v√≠rgula&#10;Exemplo: P√£o, Molho Mima, Alface, Tomate, Cebola"
                            required></textarea>
                        <small id="ingredient-list-hint">Separe os ingredientes por v√≠rgula. Todos ser√£o criados com pre√ßo R$ 0,00 e como ativos.</small>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-cancel" id="cancel-ingredient-batch-btn">Cancelar</button>
                        <button type="submit" class="btn-save">Criar Ingredientes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Produto -->
    <div id="product-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Adicionar Produto</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <form id="product-form">
                <input type="hidden" id="product-id">
                
                <div class="form-group">
                    <label for="product-name">Nome do Produto *</label>
                    <input type="text" id="product-name" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="product-price">Pre√ßo (R$) *</label>
                        <input type="number" id="product-price" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label for="product-category">Categoria *</label>
                        <select id="product-category" required>
                            <option value="">Selecione...</option>
                            <option value="Burguers">Burguers</option>
                            <option value="Hot-Dogs">Hot-Dogs</option>
                            <option value="Por√ß√µes">Por√ß√µes</option>
                            <option value="Bebidas">Bebidas</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="product-image">URL da Imagem</label>
                    <input type="text" id="product-image" placeholder="../assets/images/...">
                    <small>Exemplo: ../assets/images/Burgers_01_voMima.png</small>
                </div>

                <!-- Se√ß√£o: Ingredientes (Padr√£o) -->
                <div class="form-group ingredients-section-group">
                    <label>Ingredientes (Padr√£o)</label>
                    <div class="ingredients-checkbox-list" id="product-default-ingredients-list">
                        <!-- Checkboxes de ingredientes padr√£o ser√£o carregados aqui -->
                        <p class="loading-text">Carregando ingredientes...</p>
                    </div>
                    <small>Marque os ingredientes que j√° v√™m inclu√≠dos no produto. A descri√ß√£o ser√° gerada automaticamente.</small>
                </div>

                <!-- Descri√ß√£o gerada automaticamente -->
                <div class="form-group">
                    <label for="product-description">Descri√ß√£o (Gerada automaticamente)</label>
                    <textarea id="product-description" rows="3" placeholder="A descri√ß√£o ser√° gerada automaticamente a partir dos ingredientes padr√£o selecionados..." readonly></textarea>
                    <small>A descri√ß√£o √© gerada automaticamente. Voc√™ pode edit√°-la manualmente se necess√°rio.</small>
                </div>

                <!-- Se√ß√£o: Ingredientes Dispon√≠veis -->
                <div class="form-group ingredients-section-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <label style="margin-bottom: 0;">Ingredientes Dispon√≠veis</label>
                        <button type="button" id="select-all-available-btn" class="btn-select-all">
                            Selecionar Todos
                        </button>
                    </div>
                    <div class="ingredients-checkbox-list" id="product-ingredients-list">
                        <!-- Checkboxes de ingredientes dispon√≠veis ser√£o carregados aqui -->
                        <p class="loading-text">Carregando ingredientes...</p>
                    </div>
                    <small>Marque os ingredientes que podem ser adicionados/removidos neste produto</small>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="product-available" checked>
                        <span>Produto dispon√≠vel</span>
                    </label>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-cancel" id="cancel-btn">Cancelar</button>
                    <button type="submit" class="btn-save">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notifica√ß√£o Toast -->
    <div id="toast" class="toast"></div>

    <!-- Scripts -->
    <script type="module" src="../firebase-config.js"></script>
    <script type="module" src="../services/products-service.js"></script>
    <script type="module" src="../services/ingredients-service.js"></script>
    <script type="module" src="../services/config-service.js"></script>
    <!-- Modal de Feedback -->
    <div id="feedback-modal" class="modal-overlay">
        <div class="modal-content feedback-modal-content">
            <div class="modal-header">
                <h3 id="feedback-modal-title">Resultado da Cria√ß√£o</h3>
                <button class="modal-close" id="feedback-modal-close">&times;</button>
            </div>
            <div class="feedback-modal-body" id="feedback-modal-body">
                <!-- Conte√∫do ser√° inserido dinamicamente -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-primary" id="feedback-modal-ok">OK</button>
            </div>
        </div>
    </div>

    <script type="module" src="admin.js"></script>
</body>
</html>

